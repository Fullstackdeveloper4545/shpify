<section class="home-faq">
  <div class="page-width">
    <div class="home-categories__header">
      <h2 class="home-categories__title">{{ section.settings.heading }}</h2>
    </div>
    <div class="home-faq__list">
      {% for block in section.blocks %}
        <div class="home-faq__item" {{ block.shopify_attributes }}>
          <button class="home-faq__question" type="button" data-faq-trigger>
            <span>{{ block.settings.question }}</span>
            <span aria-hidden="true">+</span>
          </button>
          <div class="home-faq__answer" hidden>
            {{ block.settings.answer }}
          </div>
        </div>
      {% endfor %}
    </div>
  </div>
</section>

{% javascript %}
  (() => {
    document.querySelectorAll('[data-faq-trigger]').forEach((trigger) => {
      trigger.addEventListener('click', () => {
        const answer = trigger.nextElementSibling;
        const isHidden = answer.hasAttribute('hidden');
        document.querySelectorAll('.home-faq__answer').forEach((el) => el.setAttribute('hidden', true));
        if (isHidden) {
          answer.removeAttribute('hidden');
        } else {
          answer.setAttribute('hidden', true);
        }
      });
    });
  })();
{% endjavascript %}

{% schema %}
{
  "name": "Home FAQ",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Título",
      "default": "Perguntas Frequentes"
    }
  ],
  "blocks": [
    {
      "type": "faq",
      "name": "Pergunta",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Pergunta",
          "default": "Quanto tempo demora a entrega da minha encomenda?"
        },
        {
          "type": "textarea",
          "id": "answer",
          "label": "Resposta",
          "default": "As entregas são feitas em 48h em Portugal Continental."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Home FAQ",
      "blocks": [
        {
          "type": "faq"
        },
        {
          "type": "faq"
        },
        {
          "type": "faq"
        }
      ]
    }
  ]
}
{% endschema %}
